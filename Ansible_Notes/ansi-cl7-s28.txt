we have to create one ec2 server and then connect to mobaxterm... install ansible

first we need to run AWS configure before going to start 

need to install $ pip3.9 install boto3 botocore

--> for sure every tool has some kind of default configuration or else for customization purpose, so in that if any need we have a chance to edit or recorrect

EX Nginx configuration, crontab config, ssh config.......etc so like that ansible also have some configuration 

ansible configuration
====================
For more deatils u can access the below URL
https://docs.ansible.com/projects/ansible/latest/reference_appendices/config.html

Changes can be made and used in a configuration file which will be searched for in the following order: --> so ansible will start to search for config any one of it

	1. ANSIBLE_CONFIG (environment variable if set)

	2. ansible.cfg (in the current directory)

	3. ~/.ansible.cfg (in the home directory)

	4. /etc/ansible/ansible.cfg

Ansible will process the above list and use the first file found, all others are ignored.

--> see google doc for more info cmds

1. ANSIBLE_CONFIG env variable
2. pwd
3. home directory
4. /etc/ansible/ansible.cfg

--> so best preference is 2. pwd, bcz we have been to create many ansible repos, so when that time if u want store specific config for each repos then u will able to create separate folder like ansible.cfg....in your project

--> so in that folder it has many options so reffer this URL for more options to know (https://docs.ansible.com/projects/ansible/latest/reference_appendices/config.html)

--> IN ansible-robo-roles --> ansible.cfg folder created

--> see in google for execution 

--> IN ansible.cfg lo log path has been defined 

--> it used to store the all ansible repos logs inside

logs --> need to ask someone session 28 15: 00 min

--> WHAT is DEBUG === VVV measns verbose ======	
=========
Debug is a process used by developers and programmers to identify and remove errors or bugs in software or hardware
--> if u want see excute code ion screen u can give like (-vv) it is for few matter, for more more u can give like (-vvv) 

EX: ]$ ansible-playbook -vv all-start-code.yaml -e "component=mongodb"

TAGS
=====
Ansible tags are metadata used to label tasks, blocks, plays, or roles within a playbook, allowing users to selectively run or skip specific parts during execution. This is particularly useful for debugging, testing, and managing large, complex playbooks

							OR  https://docs.ansible.com/projects/ansible/latest/playbook_guide/playbooks_tags.html

If you have a large playbook, it may be useful to run only specific parts of it instead of running the entire playbook. 

--> means which code excute avvali and adhi excute avakudadhu ani cheptundi..

--> for example deployment chestunam anuko then first time run cheste code antha excute avuthudi, and emaina chages vunte malli first nuchi kakunda only ekkada ithe changes done aa step lu run ithe chalu so run kavalisina step dhaggar tags use cheste done inka

EX : see in cata --> tasks ( main.yaml)  # tags:
  					    # - deployment

--> In execution time u can call it like these ]$ ansible-playbook -vv all-start-code.yaml -e "component=mongodb" -t deployment

--> if need in your projects u can create separate folder in tasks --> main.yaml file andhulo code ni put chei

include_role vs import_role

include_role 					explicit --> crystal clear or obvious or clear
==============          			
it includes at run time, checks while processing. include will not respect tags. We must explicitly set inside the tasks

-->excute time lo overall code antha check chesukodhuu, step by step code excute avuthunte, ekkada ithe step lo fail avuthundho aa step varaku run ayyi agipothundhi

import_role  
==============
imports the role before exection and parse it, checks before processing. applying tags at the import setup to all the tasks automatically.

--> excute time lo overall code antha check chesukoni  emaina error vunte startinglone error vastundhi will stop excution 

--> In ansible-robo-role --> include-import-robo.yaml

--> In roles --> inlcude-imoprt dir --> tasks --> main.yaml
---> In roles --> for-common --> include-import-com.yaml
====================	=======================================================			=================================

dynamic inventory
===============
Dynamic inventory in Ansible automatically fetches a real-time list of hosts from external sources like cloud APIs (AWS, Azure, GCP) or CMDBs, eliminating manual updates and adapting to changing infrastructure (like auto-scaled servers)

--> autoscaling means ---> when trafic increase servers will be increased  [ EX: big billon days) 

--> a plugin is provided by aws and ansible to fetch the IP address dynamically 

--> Now let's assume if u have created 6 server in ec2 server in AWS, when if u want take ip of those 6 server easy, but if it has 100 servers when that its very stuff to get 100 ip's

EX: query aws properties or parameters like as us-east-1, ec2, running and name should be frontend  so ila filter chesi query cheyachu through plugins

-->tasks behaviour is -> execute something on the remote/target server  

so manam vere system loki velli info ni fetch cheyalante u need plugins

plugins behaviour is -> connects to other system and fetch required information

so naming formate is demo.aws_ec2.yml/yaml --> instead of demo u can put anything

************for excute CMD --$ ansible-inventory -i demo-plugins.aws_ec2.yaml --graph

--> ila iste demo yaml file excute ayyi ip address lu print avuthai

so now try with this for real time 

--> In ansible-robo-role --> demo-plugins.aws_ec2.yaml file created 

 --> In ansible-robo-rol --> nginx.yaml file created for running u need give below cmd

ansible-inventory -i demo-plugins.aws_ec2.yaml -e ansible_user=ec2-user -e ansible_password=DevOps321 nginx.yaml

--[ansible can connect to AWS dynamically to fetch the IP address using dynamic inventory plugin(amazon.aws.aws_ec2), this helps in autoscaling kind of environment, where fetching the IP address statically is not possible]



secrets
==========
we have one parameter that is vault means-> secured place to keep the secrets

in ansible we have called as =---> ansible-vault

--> first we have to create a file or folder, then u need to set up for that folder or file
--> the below pwd is encypt for detailed info see in google doc ansible config page

[ ec2-user@ip-172-31-66-23 ~/ansible-robo-roles ]$ cat test.yaml
$ANSIBLE_VAULT;1.1;AES256
34373562326439383231613035643866326539363037306436353361653565343363363434653961
6538323761376433663066666634386263346337333733360a633661366661316363373564333066
39356638643037653166356634346633356561383064656331623666373362626138336634376531
3935333464373133610a316665313564636638626266356363343532346234356138393634613661
39343630313666393965376466353666623736653332333432316363396664616333

--> So whoever have that original pwd they can decypt or open
--> we have just 4 cmds to set up pwd for vault
 ansible-vault create mysql.yaml
 ansible-vault view mysql.yaml
 ansible-vault edit mysql.yaml
 ansible-vault delete mysql.yaml

--> is u want give this pwd for public then give decypt pwd ... cat mysql.yaml

--> IN ansible-robo-role --> grp_vars---> MySQL folder created --> inside any name like vault.yaml
 						OR ELSE
--> u can put it like in role --> MySQL --> vars --> main.yaml  ---> it's behaviour like as variable 

--> after set secret pwd if u want run MySQL dir give below cmd

-->$ ansible-playbook -i inventory main.yaml -e "component=mysql" ( ila iste error like attempting to decrypt but no vault .....) 

--> $ ansible-playbook -i inventory main.yaml -e "component=mysql" --ask-vault-pass   ( this is the right cmd) 

--> but ila kuda manam adagakuadhu in cmd line lo like --ask-vault-pass ani ila 

--> so for this we have cmd like vault_password_file = ... this is available in anisble.cfg file in roles in VSCODEs

--> see more info in google doc ansible config page

--> if u want run again give like $ ansible-playbook -i inventory main.yaml -e "component=mysql" 

--> for telnet check is --> telnet mysql.dsoaws.fun 3306

--> see more info in google doc ansible config page

--> finally here store key inside the server

secrets manager
===============

AWS is a platform it measn it gives many options to us like VPC,EC2,IAM,S3,.....	So ala everything oka chota available ga vundatumm

--> In aws tool ni could kosam use chestunnam, so we have a option to store our pwd in that. no need go for 3rd party tools to secure our pwds 

--> In aws --> system manager --> parameter store is one of the option 
--> create parameter --> name (/) tho ivvali like /robo/mysql/mysql_root_password --> standard --> type is SecureString--> my account --> in value box give pwd is RoboSHop@1 --> click on create

--> here whoever has admin access in our team like client or manager or VC... so vallaki visible

hashicorp vault .. ila 3rd party tool vuntai pwd ni secure cheyadanii,

--> 
--> IN ansible-robo-role --> grp_vars---> MySQL folder created --> inside any name like main.yaml
 						OR ELSE
--> u can put it like in role --> MySQL --> vars --> main.yaml  ---> it's behaviour like as variable 

if u want run again give like $ sudo or without this if error occured ansible-playbook -i inventory main.yaml -e "component=mysql"   --( bcz valut ki file ki permission ichham )
 while running this u can comment ansible.cfg lo vault_password_file ni comment chei.........

--> *** ansible vault numchi .. aws lo ssm parameter ki change ayyamu 

--> ansible forks 

--> In ansible-robo-role --> ansible-forks.cfg 

--> u can this cmd after changes done below
--> ansible-playbook -i demoplugins.aws_ec2.yaml -e ansible_user=ec2-user -e ansible_password=DevOps321 nginx.yaml

--> at a time 6 servers ki okesari connect avuthundi..  based on server capacity like t3micro kakunda t3samll ane power full server ki forks use cheste we will get immediate response




=================== Ansible is done =====================

ansibe tower useless topic 
ansible galaxy worst no need to worry about that bcz more complexcity no one can use this



