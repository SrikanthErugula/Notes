
local-exec -> runs the commands in local i.e where terraform command is executed

provisioner "local-exec" {
	command = ""
	on_failure = continue  --> it means continuing when we resources failed as well
	when = destroy --> it means destroy time lo kuda run avuthundhi or else creation time lo kuda run avuthundhi....
}

remote-exec
=============
terraform can connect to ec2 instance and configure it using remote-exec. basically running commands inside the server
--> resource "aws_instance" "terraform" {.....} so this is a block, after come out this block.. if u want private then u can call or access it like these aws.terraform.private_ip or public-ip.... or else if u are inside or same block lo vunte u can call or access it like ${self.private_ip}.... not pvt-ip u can call any item...

--> remote exec.. here terraform local ante windows so from windows if u want connect instance u have to use pub-ip not a pvt ip
----> before that u have to configure or take connection block {...} see in VSCODE
--> destroy ani run chesinapudu first server stop ayyi next destroy ayipothadhi.....

How to create multiple environments using terraform
===================================================
--> in terraform one of the best example enti ante.. consistent the infrastructure across the environ.. it means if u are in dev or prod or QA lo vunna we can do to create same infrastructure bcz here code is same

1. using .tfvars
2. terraform workspaces
3. individual repos

tfvars   -----------------------need to listen for class 33 ---36:00 
========
tfvars folder created and run terraform init for execute the code 
it is used to override the default values of the variables
--> so in terraform keys are fixed, so then only changed the values only as per the env or DEV or PROD ... values ni control cheyatame inka

EX:-
====
DEV and PROD -- take 2 different env here
--> then s3 buckets anevi separate ga create cheyatum best bcz dev lo daily edho oka work chestane vunyaru but in prod lo can't perform daily....

tags
=====
common tags
	Project = Roboshop
	Terraform = true
--> ivi dev and prod ki same ithe then we can us this common tags
---> if not same for all in that case we have to use this separate tags
seperate tags
	component = catalogue
	Environment = dev/prod

--> Execution process antha see in google doc file dig-1 page lo 

--> ec2 server creation code antha same so we haven't go with separate folder.... we are using same configuration...
--> main advtage is code reused
	
Terraform Workspace
=====================
--> Env is nothing but workspace
--> sample commands are stored in google doc multi env page 

workspace folder created and run terraform init for execute the code 

-->Basically  terraform workspace will given like as terraform.workspace = dev ( manam which workspace lo vunte adhulo dhani value store avutundhi... like dev ite dev or else prod ite prod values will be stored

--> go to vscode need to check the provider.tf and change the key and run terraform cmds..
--> same code whatever have tfvars folder
--> if u a done any changes in provider.tf file then immediately give cmd like (terraform init -reconfigure )

--> new DEV workspace created
--> in variable,tf lo instance type lo and environ lo values updated.

--> manam which values ni control cheyalanukuntunnaroo adhi terraform.workspace lo store ayi vundali
-- >how to get a key in a map in terraform........... https://developer.hashicorp.com/terraform/language/functions/lookup
Syntax:
=======
lookup(<map>, <key>, <default_value>)

EX: 1
> lookup({a="ay", b="bee"}, "a", "what?")
ay --> so ichhina map lo "a" ki value assign ayyindhi so "a"  value printed

EX: 2
> lookup({a="ay", b="bee"}, "c", "what?")
what? so ichhina map lo "c" ki  no value  so default value printed. "what?"


The Terraform lookup function retrieves a single value from a map variable (a collection of key-value pairs) given a specific key. It allows for dynamic configuration and helps maintain clean, reusable code. 

terraform.workspace it means manam present which env lo ithe vunnamo dhani refer chestundhi  

--> if u want destroy u have to select respective env and give destroy cmd
--> main advtage is code reused


maintain different repos for different environments
================================
--> here individual ga env wise repos ni create chesukoni code rasukunte better.. bcz to over come issue 
--> but here code anedhi repeated ga avuthundhi..

roboshop-infra-dev
roboshop-infra-prod

--> to over this repeated code we have one option is terraform modules lo repeated code ni store chesukovachhu.. we can call if required

--> interview lo adiginapudu we are using multiple process konni old project lo tf vars and konni workspace lo use chestunnam but now if any new projects ki modules ni develop chesukoni individual env wise code rastunam 

==========================