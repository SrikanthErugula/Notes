cd /c/Users/srika/devsecops/shellscript/Notes/Terraform_notes/

Remote state
==============
--> state is used by terraform. usually we should not touch state file. 

--> We should secure state file from accidental changes.  --> it means unfortunately keys press avavtum and delete avvatum with our interruption  .  

1st person completed infra, state is in his local.. ---> state file anedhi 1st person laptop lone vunttadhi,
2nd person want to do changes, so here 1st person emi chesadu ani 2nd person ki teliyadhu so in this case, he initialise terraform, he will plan and he will apply

so here mainly 2 thigs will happen
=================================
1. either duplicate resources will be created
2. error while creating resources or else we will get error like saying that already exists

--> so ec2 instaces enni ayina create cheyachu, but sg matram same vunte manaki error vastundhi like already exist ani
---> what is the solution while mutliple person work chestunte
--> here we have dig state.drwio..

we must keep state file in remote location while working in collaboration environment for security and preventing duplicate resources and errors when multiple members( team members) are working together

--> state file should be locked when terraform is doing something, so that other person can't apply the changes.

--> everytool ki oka starage vunttadhi like aws ki s3 ani azure ki someedho... emi lekapothe terraform own ga storage create chestundhi..
--> drive lo manam ela folder create chetamo ala aws lo s3 bucket create cheyali.. for starage purpose our state file....
--> here entire aws s3 bucket name should be unique ga vundali...
--> dsoaws-remote-state --> s3 bucket create chesam next aa file location or path access terraform ki ichhi state files ni akkada store chesuko ani cheppali...

terrform aws s3 remote starge ---> https://developer.hashicorp.com/terraform/language/backend/s3 --> here we will get backend code for state file storing

--> so ideally we have to use remote state files in real time projects........

locals
=======
--> so here variable.tf file access andhariki ivvakudadhu or else small company run chestunte vallu as per the budget vallu t3.micro ni use chestaru manam variable.tf file ki access iste  team vallu dhani change chesi use chesukuntaru so we aren't give access to them.. for that we need to create local.tf for restrict purpose..

--> local.tf introduced by  terraform so we can't do any changes.. inside file.

locals are like variables but it has many extra capabilities

1. variables can be overridden, locals can't be overridden ( re-write by someone)
2. you can use variables inside locals. but we can't use one variable in another variable

EX:-

variable "common_name" {
    default = "${var.project}-${var.environment}"
}


3. you can store expressions or functions inside locals block and reuse them whenever required

mysql catalogue cart user --ila same names vunttai for different projects so we need to get unique while creating resources....... like as below we have to set names for creation of resoures....

roboshop-catalogue --------> naming conversion for unique kosam
roboshop-dev-catalogue --------> naming conversion for unique kosam --> small company one aws account vunte like these need to create resources with unique name....
roboshop-qa-catalogue --------> naming conversion for unique kosam

--> need to know what is the difference b/w local and variables


dynamic block ----> not much use in real time we need to know basic matter
==============
loops inside terraform
	count based
	for_each
	dynamic
	
22 8080 80 3306 27017 6379 5672

--> oka block multiple times repeated avuthunte we need to use dynamic



Provisoners
=============
terraform is creating instance, if we want to configure terraform is allowing to run few scripts

--> basically provisioning means it will change position to another position... 
--> once incident create chesina tharivatha emi cheyali ante we have to options like as below

1. local-exec  ----> terraform cmd ekkada ithe vundho or run cheestunte  adi local
EX: here terraform plan and apply anevi nenu ippudu windows lo run cheste... windows anedhi local avuthundhi....

2. remote-exec ---> so here local tho server or ec2 instance crate chesi serve loki login ayyi akkada some cmds or actions perform excute chese dhani remote exce antam

on_failure = continue  use is oka vela ip address inventory file lo rayalekapothe provisioner ila cheptundhi the above ec2 resource also failed ni.. so to overcome this issue u need to add on_fail ane option ni add cheste  then provision says like ec2 resources no fail...

ansible-playbook -i inventory playbook.yaml ----> ila ansible ki connect cheyachu for server configuration ki