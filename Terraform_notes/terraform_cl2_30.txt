cd /c/Users/srika/devsecops/shellscript/Notes/Terraform_notes/

1. installed terraform, setup the env variable in system path
2. aws cli v2 install
3. aws configure

terraform init
terraform plan
terraform apply
terraform destroy

--> the syntax we called as 
The HashiCorp Configuration Language (HCL) syntax is designed to be human-readable and machine-friendly, built primarily around arguments, blocks, and expressions. It is used in HashiCorp products like Terraform, Nomad, and Packer. 

resource "type_of_resource" "resource_name_our_wish" {
	key = "value"
}

** so the above syntax must be present to create or delete any resource..it is called as skelton syntax ......


git -> repository to store only code.
drive -> store files

added into staging area
commited to local repository
but rejected from central repo

rm -rf .git
add .gitignore
git init
git branch -M main
git remote add origin <URL>
git add . ; git commit ; git push



variables
============
DRY

x=1, y=2

final substitution

---> serach in google like tearraform variabels ---> https://developer.hashicorp.com/terraform/language/values/variables
Syntax is
---------
variable "variable_name" {
	default = "value-of-variable"
}


var.variable_name --- it is used to access or get value useing var
ex:- var.ami_id and var.instance_type  like this u can refer in ec2.tf lo 


variable folder ni create chesam...

variable "ec2-tags" here ec2 instance server create ayina tharuvatha tags anvi manaki understand purpose ki use chestam adhe oka sepeate label in aws ...manula ga kuda add chesukovachhu in aws lo 

+============================================================ +++=========		======================================			=====================

serach in google like terraform data typeshttps://developer.hashicorp.com/terraform/language/expressions/types


preference topic
===========

1. command line variable values have first preference
syntax: terraform plan -var='instance_type=t2.micro'

 
2. terraform.tfvars
syntax:: terraform plan -var-file='my-vars.tfvars'   ---> another model ---> 

EX:-
#instance_type = "t3.sri" 

# but here variable name like instance_type should be same in ec2.tf whatever here present value those must be same appude adi pickup chesukuntttadhi


3. env variable TF_VAR_<variable_name>

synrtax::;  export TF_VAR_instance_type="t3.reddy"

export TF_VAR_instance_type="t3.large"
export TF_VAR_db_password="aVerySecurePassword123"

unset TF_VAR_instance_type ----> ila ivvatum valla adhi remove avuthundi ---> default state ki vastundhi

4. default value so  emiana vundha ani..

So actually ga user ni adugutham value ni provide chayamani, vallaki teliyali ga
so manaki readability kosam manam type anedhi use chestam, like string or map or list or number ani...........

5. finally prompt  --> it means manam value ni enter cheyali 

variable "instance_type" {
  type =  string
  default = "t3.micro" # so after this in ec2.tf lo var.variable ani iste access avuthumdi
}

---> so here the above values same use chyalisina avasarum ledhu bcz vere user vastdu valla application wise values change chestaru but akkada type string ani vundi so string type value only tisukovali ni cheptunam map use cheyakuadhu...


conditions
==============
SYNTAX
===========
if(expression){
	this will run if expression is true
}
else{
	this will run if expression is false
}


in terraform syntax is:
------------------------
expression ? "this will run if true" : "this will run if false"

instance_type = var.environment == "dev" ? "t3.micro" : "t3.medium"


count based loop
================
--> provider.tf is must be defined or presented in folder bcz terraform ki cheppali nenu AWS use chestuna ni, ledkapothe dhaniki ardhamkadhu AWS, azure use chestunamooo
--> SO here count 10 ani iste, 11 instance create avuthai with sg, so other 10 instance ki same name vunttadhi there is no difference in b/w them. so dhaniki to overcome this issue terraform lo oka syntax vundhi like as below

EX:-
 # aws_instance.terraform[0] will be created
 # aws_instance.terraform[1] will be created
 tags                                 = {
          + "Name"      = "terraform"
          + "terraform" = "true"
        }

--> so ila same name tho servers will be create to over come this problem we have the below syntax.........

count.index -> special variable --> terraform has given like this

count = 10 --> ila iste process like as below laga servers create avuthai...... so adhi oka block anukunte so akkada 10 times loop chei ani cheppatunam count ani key tho

count.index -> 0
count.index -> 1
count.index -> 9
--> so variable.tf lo indicate chestam like this variable "instances" {}

tags = {
    Name = var.instances[count.index] # so here explanation see in notes
    terraform = true 

--> result like these
=======================
 tags                                
          + "Name"      = "rabbitmq" or MySQL or mangodb ala servers create avuthai..
          + "terraform" = "true"


Name = var.instances[count.index] # so here instance name anedhi variable lo ista so akkada numchi adhi tisukunttadhi next count.index lo index starts from 0 so first emi name vunte adhi instance create avuthundi, next 1 ki vachhi next emi vunte adhi create avtuhudhi

so this called count based usually works with list items.....

-->if in case u wrote all tf files in single folder terraform will start the execution alphabetical order...abcde...


===================
"${var.instances[count.index]}.${var.domain_name}"    # so ilanti situation lo confirm ga ${} use cheyali

records = [aws_instance.terraform[count.index].private_ip] ----> so ikkada [aws_instance.terraform[count.index] ila ivvatum valla instances create ayyi index starts from 0, so next 1,2,3 so ala anni ec2 instance or servers create ayyi mankai o/p lo private ip print avuthundi....


interpolation
============
concatenating variable and other content--> it means add 2 variables

upto here variable.tf and count.tf and condition.tf ---- learned upto this.... clear
====================
	